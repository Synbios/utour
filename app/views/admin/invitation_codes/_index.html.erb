<!-- Widget ID (each widget will need unique ID)-->
<div class="jarviswidget jarviswidget-color-blueDark" id="invitation_code_table" data-widget-editbutton="false">
  <%# widget options:

  usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">
  			
  data-widget-colorbutton="false"
  data-widget-editbutton="false"
  data-widget-togglebutton="false"
  data-widget-deletebutton="false"
  data-widget-fullscreenbutton="false"
  data-widget-custombutton="false"
  data-widget-collapsed="true"
  data-widget-sortable="false"
  			
  %>
  <header>
   <span class="widget-icon"> <i class="fa fa-table"></i> </span>
   <h2>注册码列表 </h2>

  </header>
 
  <!-- widget div-->
  <div>

    <!-- widget edit box -->
    <div class="jarviswidget-editbox">
    <!-- This area used as dropdown edit box -->

    </div><!-- end widget edit box -->

    <!-- widget content -->
    <div class="widget-body no-padding">

      <table id="datatable_fixed_column" class="table table-striped table-bordered smart-form">
        <thead>
          <tr>
            <th>编号</th>
            <th>状态</th>
            <th>创建人</th>
            <th>预设用户组</th>
            <th>预设标签权限</th>
            <th>过期时间</th>
            <th>注册码</th>
          </tr>
          <tr class="second">
            <td>
              <label class="input">
                <input type="text" name="search_id" value="过滤编号" class="search_init">
              </label>
            </td>
            <td>
              <label class="input">
                <input type="text" name="search_used" value="过滤状态" class="search_init">
              </label>	
            </td>
            <td>
              <label class="input">
                <input type="text" name="search_account_id" value="过滤创建人" class="search_init">
              </label>	
            </td>
            <td>
              <label class="input">
                <input type="text" name="search_user_class_id" value="过滤用户组" class="search_init">
              </label>	
            </td>
            <td>
              <label class="input">
                <input type="text" name="search_user_group_id" value="过滤标签权限" class="search_init">
              </label>	
            </td>
            <td>
              <label class="input">
                <input type="text" name="search_created_at" value="过滤过期时间" class="search_init">
              </label>
            </td>
            <td>
              <label class="input">
                <input type="text" name="search_code" value="过滤注册码" class="search_init">
              </label>
            </td>
          </tr>
        </thead>
        <tbody>
        	<% codes.each do |code| %>
            <tr>
              <td><%= code.id %></td>
              <td>
                <% if code.status[:state] != :ok %>
                <%= code.status[:message] %>
                <% else %>
                尚未使用 
                <%= link_to "取消", cancel_admin_invitation_code_path(code), remote: false, class: "btn btn-xs btn-primary", data: { confirm: '注册码一旦取消后将不能复原?' } %>
                <% end %>
              </td>
              <td><%= Account.find_by_id(code.issued_by).name %></td>
              <td><%= code.user_class_id %></td>
              <td><%= code.user_group_id %></td>
              <td><%= code.created_at %></td>
              <td><%= code.code %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <!-- end widget content -->

  </div>
  <!-- end widget div -->

</div>
						<!-- end widget -->
